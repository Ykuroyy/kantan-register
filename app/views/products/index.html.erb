<h1 class="form-heading">商品一覧</h1>

<!-- ✅ フラッシュメッセージ表示 -->
<% if flash[:notice] %>
  <p class="notice"><%= flash[:notice] %></p>
<% end %>

<% if flash[:alert] %>
  <p class="alert"><%= flash[:alert] %></p>
<% end %>



<!-- 🔍 検索フォームを追加 -->
<%= form_with url: products_path, method: :get, local: true do |f| %>
  <%= f.label :keyword, "商品名で検索" %>
  <%= f.text_field :keyword, value: params[:keyword], placeholder: "例）メロンパン" %>
  <%= f.submit "検索", class: "form-button blue" %>
<% end %>





<div class="form-container">
  <% @products.each do |product| %>
    <div class="form-card">
      <% if product.image.attached? %>
        <%= image_tag product.image.variant(resize_to_limit: [500, 500]), class: "preview-image" %>
      <% else %>
        <div class="preview-image no-image">画像なし</div>
      <% end %>

      <div class="form-field">
        <strong>商品名:</strong> <%= product.name %>
      </div>

      <div class="form-field">
        <strong>価格:</strong> ¥<%= number_with_delimiter(product.price) %>
      </div>

      <div class="form-actions">
        <%= link_to "詳細", product_path(product), class: "form-button blue" %>
      </div>
    </div>
  <% end %>
</div>


<div class="text-center" style="margin-top: 20px;">
  <%= link_to "新規商品登録", new_product_path, class: "form-button blue" %>
  <%= link_to "トップページに戻る", root_path, class: "form-button gray" %>
</div>
